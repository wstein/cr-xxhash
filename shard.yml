name: cr-xxhash
version: 0.1.0

description: |
  High-performance Crystal implementation of Yann Collet's xxHash algorithm.
  Optimized for LLVM and SIMD.

authors:
  - Werner Stein <werner.stein@gmail.com>

targets:
  xxhsum:
    main: src/xxhsum.cr

crystal: ">= 1.19.0"

# Automatically compile vendored xxHash C library and create CLI aliases
scripts:
  postinstall: |
    # Build the xxHash object file (used by specs) and the static library
    make -C vendor/xxHash xxhash.o libxxhash.a
    mkdir -p bin
    ln -sf xxhsum ./bin/xxh32sum
    ln -sf xxhsum ./bin/xxh64sum
    ln -sf xxhsum ./bin/xxh128sum
    ln -sf xxhsum ./bin/xxh3sum

license: BSD-2-Clause
