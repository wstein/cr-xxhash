== Reproducibility

To aid reproducible measurement, this repository includes helper scripts and guidance:

* link:papers/CONTRIBUTING.adoc[Contributing & Performance Methodology]
* link:scripts/README.md[Scripts README — tool_versions.rb]
* link:vendor/xxHash/LICENSE[Upstream xxHash license]

Tips: Include the output of `ruby scripts/tool_versions.rb --json` with each benchmark run and attach it to CI artifacts.

=== Appendix: Reproducibility (Exact commands)

Run the full automated comparison and persist artifacts (recommended):

```bash
# Enter the dev shell
nix-shell

# Run the full assembly + benchmark extraction
bash scripts/asm_analysis.sh

# Run the benchmark harness (100 KB sample)
./bin/xxhsum -b -B100K

# Generate the JSON/HTML comparison report from persisted dumps
ruby scripts/asm_analyzer.rb \
  tmp/asm_analysis_reports/xxhash_c.asm \
  tmp/asm_analysis_reports/xxhsum_crystal.asm \
  --json tmp/detailed_asm_report.json \
  --html tmp/asm_asm_report.html

# Capture tool versions (attach to artifacts)
ruby scripts/tool_versions.rb --json > tmp/tool_versions.json
```

Important: include the `tmp/asm_analysis_reports/` directory with your artifacts — it contains disassemblies and extracted sections used for the paper's analysis (e.g., `xxhash_c.asm`, `xxhsum_crystal.asm`, `c_analysis.md`, `crystal_analysis.md`).
